(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b8b2a"],{3090:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"selectDeptAndPositions"}},[i("v-text-field",{attrs:{label:"*部门/岗位",required:"",rules:t.nameRules,readonly:""},on:{click:function(e){t.selectDeptAndPositionsDialog=!0}},model:{value:t.displayDeptAndPositions,callback:function(e){t.displayDeptAndPositions=e},expression:"displayDeptAndPositions"}}),i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.selectDeptAndPositionsDialog,callback:function(e){t.selectDeptAndPositionsDialog=e},expression:"selectDeptAndPositionsDialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("部门/岗位")])]),i("v-card-text",[i("v-container",[i("v-row",[i("v-divider",{attrs:{vertical:""}}),i("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[i("v-treeview",{attrs:{active:t.active,items:t.departments,open:t.open,color:"warning","return-object":"",hoverable:"",transition:"",selectable:t.selectable,"selection-type":"independent"},on:{"update:active":function(e){t.active=e},"update:open":function(e){t.open=e}},scopedSlots:t._u([{key:"prepend",fn:function(e){var n=e.open;return[i("v-icon",{attrs:{color:n?"green":"purple"}},[t._v(t._s(n?"mdi-file-tree-outline":"mdi-file-tree"))])]}}]),model:{value:t.selections,callback:function(e){t.selections=e},expression:"selections"}})],1),i("v-divider",{attrs:{vertical:""}}),i("v-col",{staticClass:"d-flex text-center"},[i("v-scroll-y-transition",{attrs:{mode:"out-in"}},[i("v-row",[t._l(t.selections,(function(e,n){return[i("v-col",{key:"a"+n,attrs:{cols:"6"}},[i("v-text-field",{attrs:{label:"部门",value:e.name}})],1),i("v-col",{key:"b"+n,attrs:{cols:"5"}},[i("v-select",{attrs:{multiple:"",items:t.positionList,label:"岗位"},model:{value:t.tempDeptIdAndPositions[e.id],callback:function(i){t.$set(t.tempDeptIdAndPositions,e.id,i)},expression:"tempDeptIdAndPositions[selection.id]"}})],1),i("v-col",{key:"c"+n,attrs:{cols:"1"}},[i("v-icon",{staticStyle:{"margin-top":"22px"},attrs:{title:"删除"},on:{click:function(e){return e.stopPropagation(),t.removeGroupAndPosition(n)}}},[t._v("mdi-delete")])],1)]}))],2)],1)],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("保存")])],1)],1)],1)],1)},s=[],o=(i("fe59"),i("9302"),i("ea69"),i("053b"),i("08ba"),{data:function(){return{active:[],avatar:null,open:[],selectable:!0,selectDeptAndPositionsDialog:!1,positionList:[],selections:[],tempDeptIdAndPositions:{},displayDeptAndPositions:"",nameRules:[function(t){return!!t||"该选项为必填字段"}]}},props:{departments:{type:Array},selectDeptAndPositionNodes:{type:Array}},mounted:function(){this.init()},computed:{},watch:{selectDeptAndPositionsDialog:function(t){t||this.close()},selectDeptAndPositionNodes:function(){this.init()}},created:function(){this.initPositions()},methods:{initPositions:function(){var t=this,e={type:"position"};this.$http.get("/user/api/v1/dictionary/listValues",e).then((function(e){e.success&&(t.positionList=e.data)})).catch((function(e){t.$store.commit("SET_SNACK",{success:!1,msg:"访问异常：获取岗位失败"})}))},init:function(){var t=this,e=[];this.selections=[],this.open=[],this.tempDeptIdAndPositions={},this.selectDeptAndPositionNodes&&(this.selectDeptAndPositionNodes.forEach((function(i,n){var s=i.positions;s&&s.length>0?e.push(i.name+"[岗位:"+s+"]"):e.push(i.name),t.selections.push(i),t.pushOpenNodes(i),t.tempDeptIdAndPositions[i.id]=i.positions})),this.displayDeptAndPositions=e.join(", "))},pushOpenNodes:function(t){var e=this,i=t.parentIds;if(i){var n=this.departments;i.forEach((function(t,i){n&&n.length>0&&(n=e.pushOpenNodesChildren(n,t))}))}},pushOpenNodesChildren:function(t,e){var i=this,n=[];return t?(t.forEach((function(t,s){if(t.id==e)return i.open.push(t),void(n=t.children)})),n):[]},removeGroupAndPosition:function(t){this.selections.splice(t,1)},close:function(){this.selectDeptAndPositionsDialog=!1},save:function(){this.saveDeptAndPosition(),this.selectDeptAndPositionsDialog=!1},saveDeptAndPosition:function(){var t=this,e=[],i={};this.selectDeptAndPositionNodes.splice(0),this.selections.forEach((function(n,s){i=n;var o=t.tempDeptIdAndPositions[n.id];o?(i.positions=o,e.push(n.name+"[岗位:"+o+"]")):(i.positions=[],e.push(n.name)),t.selectDeptAndPositionNodes.push(i)})),this.displayDeptAndPositions=e.join(", ")}}}),a=o,c=i("9ca4"),l=i("aeb5"),d=i.n(l),r=i("de9d"),p=i("93cd"),u=i("9e0d"),v=i("619c"),h=i("4459"),f=i("cd14"),m=i("b237"),D=i("4325"),A=i("86e1"),P=i("21bf"),b=i("e0f6"),y=i("3bd3"),g=i("1d5f"),k=i("e261"),V=Object(c["a"])(a,n,s,!1,null,null,null);e["default"]=V.exports;d()(V,{VBtn:r["a"],VCard:p["a"],VCardActions:u["a"],VCardText:u["b"],VCardTitle:u["c"],VCol:v["a"],VContainer:h["a"],VDialog:f["a"],VDivider:m["a"],VIcon:D["a"],VRow:A["a"],VScrollYTransition:P["f"],VSelect:b["a"],VSpacer:y["a"],VTextField:g["a"],VTreeview:k["a"]})}}]);
//# sourceMappingURL=chunk-2d0b8b2a.30cfc85d.js.map